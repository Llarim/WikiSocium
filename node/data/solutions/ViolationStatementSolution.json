{
    "id"          : "violation",
    
    "name"        : "Составление заявления о правонарушении",
    "description" : "Если вы стали свиделетем правонарушения (например, нарушение ПДД), и хотите привлечь нарушитея к ответу, это можно сделать абсолютно цивилизованно — подать заявление в Полицию. Кстати, наверное дублирование описания — говно.",
    
    "data"        : 
    {
        "law_doc" : "пока оставляем пустым — не решено в каком виде это делать",
        "documents" : ["ViolationStatement"]
    },
    
    "initialStep" :"0",
    
    "sections"	:
	[
		{
			"name": "Описываем ситуацию",
			"steps": ["0", "1", "2", "3", "4", "5", "6", "7", "8"]
		}
	],
    
    "steps"       :
    [
        {
            "id"         : "0",
            "title"      : "Место правонарушения и действующие лица",
            "type"       : "general_data",
            "widget_groups": 
            [
                  {
                        "title": "Первая группа",
                        "widgets":
                        [
                              {
                                  "widget_type" : "RegionsListWidget",
                                  "id" : "UserRegion",
                                  "InfoText" : {"name" : "Регион",
                                                "comment" : "Выберите ваш регион",
                                                "description" : "Выберите <b>ВАШ</b> регион!"}
                              },                        
                              {
                                    "widget_type" : "DateTextFieldWidget",
                                    "id" : "date",
                                    "label" : "Дата нарушения",
                                    "type" : "string"
                              },
                              {
                                    "widget_type" : "FullNameTextFieldWidget",
                                    "id" : "fullname",
                                    "label" : "ФИО",
                                    "type" : "string"
                              },
                              {
                                    "widget_type" : "TimeTextFieldWidget",
                                    "id" : "time",
                                    "label" : "Время нарушения",
                                    "type" : "string"
                              },
                              {
                                    "widget_type" : "TimerFromDateWidget",
                                    "id" : "timer1",
                                    "pickDateMessage": "Когда вы отправили заявление?",
                                    "iDidItMessage": "Йа отправил заявление!!!11",
                                    "initial": 
                                    {
                                      "startDate": "0",
                                      "pauseDate": "0",
                                      "workingPeriod": {"days": "5", "hours": "0", "leftover": "0"},
                                      "state": "stopped"
                                    } 
                              },
                              {
                                    "widget_type" : "TimerTillDateWidget",
                                    "id" : "timer11",
                                    "pickDateMessage": "Когда к вам приедет ОМОН",
                                    "iDidItMessage": "Йа был на митинге!!!",
                                    "initial": 
                                    {
                                      "startDate": "0",
                                      "pauseDate": "0",
                                      "endDate": "0",
                                      "state": "stopped"
                                    } 
                              }
                        ]
                  },
                  {
                        "title": "Вторая группа",
                        "widgets":
                        [
                            {
                                "widget_type" : "CarNumberTextFieldWidget",
                                "id" : "car_id",
                                "label" : "ГРН автомобиля-нарушителя",
                                "type" : "string"
                            },
                            {       
                                "widget_type" : "MapsWidget",
                                "id" : "place",
                                "label" : "Адрес нарушения",
                                "initial": {"lat": "55.690725", "lng": "37.413179", "address": ""},
                                "type" : "WSMaps"
                            },
                            {
                                "widget_type" : "ListWidget",
                                "label": "Тип правонарушения",
                                "id": "violation_type",
                                "initial": "red",
                                "value_list":
                                [
                                    { "value": "red", "label": "проезд на красный" },
                                    { "value": "lines", "label": "выезд на полосу встречного движения" },
                                    { "value": "rules", "label": "неподчинение правилам разметки" },
                                    { "value": "parking", "label": "нарушение правил парковки" }															
                                ]
                            }
                        ]
                  }
            ],
            "next" : [ { "id" : "1" } ]        
        },
        {
            "id"         : "1",
            "title"      : "Вы — свидетель?",
            "type"       : "selection",
            "widget_groups": 
            [
                  {
                        "widgets": 
                        [
                            {
                                "widget_type" : "RadioGroupWidget",
                                "id": "radio",
                                "label": "Являетесь ли вы непосредственным свидетелм правонарушения, или вам стало известно о нем из открытых источников?",
                                "initial": "witness",
                                "value_list": 
                                    [
                                        { "value": "witness", "label": "я являюсь непосредственным свидетелем" },
                                        { "value": "notwitness", "label": "я узнал о правонарушении из открытых источников" }
                                    ]
                            }
                        ]
                  }
            ],
            "next" : [{ "id" : "2" }]             
        },
        {   
            "id"         : "2",     
            "title"      : "Загрузка фотографии и/или видео",
            "type"       : "upload",
            "widget_groups": 
            [
                  {
                        "widgets": 
                        [
                            {
                                                                "widget_type": "URLOpenerWidget",
                                                              "id": "url"
                            }                
                        ]
                  }
            ],
            "next" : [{"id":"3"}]
        },
        {   
            "id"         : "3",     
            "title"      : "Отправка заявления",
            "type"       : "statement",    
            "widget_groups": 
            [
                  {
                        "widgets": 
                            [
                                {
                                    "widget_type" : "DocumentViewWidget",
                                    "InfoText" : {"name" : "Заявление",
                                                  "comment" : "Отправка заявления",
                                                  "description" : "Вся информация для составления заявления готова. нажмите кнопочку, чтобы сгенерировать его. Сохраните его, оно понадобится на следующем шаге."},                                    
                                    "doc_name" : "ViolationStatement",
                                    "organizations" : ["ГИБДД", "Главы регионов"],
                                    "organizations_times" : [30, 22]
                                }
                            ]
                  }
            ],
            "next" : [{ "id" : "4" }]
        },
        {           
            "id"         : "4",
            "title"      : "Подача заявления",     
            "type"       : "offline_action",
            "widget_groups": 
            [
                  {
                        "widgets": 
                        [
                                {
                                    "widget_type" : "StaticTextWidget",
                                    "text" : "Теперь, пожалуйста, идите-ка на http://gibdd.ru/letter и подавайте там заявление. Ответ должен прийти в течении 30 дней."
                                }
                        ]
                  }
            ],
            "next" : [{ "id" : "5" }]
            },
        {           
            "id"         : "5",
            "title"      : "Ждем-с",     
            "type"       : "time",    
            "widget_groups": 
            [
                  {
                        "widgets": 
                        [
                              {
                                "widget_type" : "TimerFromDateWidget",
                                "id" : "timer2",
                                "initial": 
                                {
                                  "startDate": "0",
                                  "pauseDate": "0",
                                  "workingPeriod": {"days": "2", "hours": "0", "leftover": "0"},
                                  "state": "stopped"
                                } 
                              }
                        ]
                  }
            ],
            "next" : [{"id":"6"}]
        },
        {           
            "id"         : "6",
            "title"      : "Все удалось?",     
            "type"       : "general_data", 
            "widget_groups": 
            [
                  {
                        "widgets": 
                        [
                                {
                                    "widget_type" : "RadioGroupWidget",
                                                                    "label" : "Все получилось, злодеи наказаны?",
                                                                        "id" : "radio_end",
                                                                        "initial" : "yes",
                                                                        "value_list":
                                                                                            [
                                                                                                { "value": "yes", "label": "Да" },
                                                                                                { "value": "no", "label": "Нет" }												
                                                                                            ]
                                                                }                           
                        ]
                  }
            ],
            "next" : [{ "id" : "7",
                              "predicates":
                              [
                                  {
                                    "widget_id": "radio_end",
                                    "cond": "==",
                                    "value": "yes"
                                  }
                              ]
                            },
                            { "id" : "8",
                              "predicates":
                              [
                                  {
                                    "widget_id": "radio_end",
                                    "cond": "==",
                                    "value": "no"
                                  }
                              ]
                            }]
        },
        {           
            "id"         : "7",
            "title"      : "Поздравляем!",     
            "type"       : "ok_end",
            "next" : [{
                        "id" : "endOfCase",
                        "predicates": []
                    }],     
            "widget_groups": 
            [
                  {
                        "widgets": 
                        [
                                {
                                    "widget_type" : "StaticTextWidget",
                                                                    "text" : "Ура! Поздравляем."
                                }
                        ]
                  }
            ]
        },
        {           
            "id"         : "8",
            "title"      : "Увы и ах, нужно подавать заявление в прокуратуру.",     
            "type"       : "not_ok_end",
            "next" : [{
                        "id" : "endOfCase",
                        "predicates": []
                    }],     
            "widget_groups": 
            [
                  {
                        "widgets": 
                        [
                                {
                                "widget_type" : "StaticTextWidget",
                                                            "text" : "Ура! Поздравляем."
                                }
                        ]
                  }
            ]
        }
    ]
}
