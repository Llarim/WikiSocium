extends BaseWidget

block content
  input(type="button", class="generatePDFFromDocumentButton", value="PDF", onClick="GeneratePDFFrom(#documentView_#{widget.doc_name})");
  <textarea id="documentView_#{widget.doc_name}" class="document_textarea"></textarea>
  <div id="documentOrganizationsView_#{widget.doc_name}" class="document_organizations"></div>
  script
    RegionalizedData.GetDataFromDBWithRegion('Адыгея', 'organizations', 'ГИБДД', function(data) {
        $("#documentOrganizationsView_#{widget.doc_name}").html(JSON.stringify(data)); // [TODO] implement markup
    });
    $('#documentView_#{widget.doc_name}').markItUp(mySettings);    
    $("#documentView_#{widget.doc_name}").closest(".step").watch("display", function(){
            GenerateDocument_#{widget.doc_name}();
        }, 100, "");
    if($("#documentView_#{widget.doc_name}").closest(".step").is(":visible"))
        setTimeout(function(){
            GenerateDocument_#{widget.doc_name}();    
        }, 1000); // [ATENTION] correct behavior of this timeout depends on page loading
    
