div(class="step isInvisible", id="step_#{step.id}")
  div(class="stepTitle")
    #{step.caption}
  br
  #widgets
    script(type = 'text/javascript')
      var step#{step.id}FieldsList = [];
      var notEmptyStep = false;
    - each widget in step.widgets
      - if (stepData == "null")
        !=partial(widget.widget_type, {widget:widget, step_id:step.id, value:""})
      - else
        !=partial(widget.widget_type, {widget:widget, step_id:step.id, value:stepData[widget.id]})
    script(type = 'text/javascript')
      YUI().use('inputex-string', 'inputex-form', 'inputex-datepicker', 'inputex-timeinterval', 'inputex-group', function(Y){
         groups.push(new Y.inputEx.Group({parentEl: 'step_#{step.id}', fields: step#{step.id}FieldsList}) );
      });
