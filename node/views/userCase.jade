script(type='text/javascript')
  var solutionData = !{JSON.stringify(solutionData)};
  if ( checkStepExists ( "#{currentStep}" ) ) currentStepId = "#{currentStep}";
  else currentStepId = "#{solutionData.initialStep}";
  stepsHistory = !{JSON.stringify(stepsHistory)};
  
h1
  #{solutionData.name}

div(class="caseDescription")
  p
    !{solutionData.description}

div(class="btn showEndCasePopupButton", onClick="ShowEndCasePopup()") Завершить

div(class = "steps", id = "stepsWrapper")
  - each step, i in solutionData.steps
    - if (caseData == null)
      !=partial('aStep', {step:step, stepData:null, step_index:i, sectionData:solutionData.sections})
    - else
      !=partial('aStep', {step:step, stepData:caseData[step.id], step_index:i, sectionData:solutionData.sections})
div.alert.alert-error(id="validationFailedMessage", style="display:none") Проверьте правильность заполнения всех полей
div
  div(class="btn", id="prev_btn", onClick="PrevStep()") Предыдущий шаг
  div(class="btn", id="next_btn", onClick="NextStep()") Следующий шаг
  a(href="/mycases") Перейти к списку кейсов
div(id="endCasePopup")
  != partial('endCasePopup', {caseName: caseName})
div(id="descriptionPopup")
