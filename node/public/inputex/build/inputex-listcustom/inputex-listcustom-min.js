YUI.add("inputex-pie-listcustom",function(b){var a=b.inputEx;a.widget.ListCustom=function(c){this.options={};this.listSelectOptions=c.listSelectOptions;this.maxItems=c.maxItems;this.animColors=c.animColors||false;this.maxItemsAlert=c.maxItemsAlert;this.uniqueness=c.uniqueness||false;this.disabled=false;this.classRemoveButton=c.classRemoveButton;a.widget.ListCustom.superclass.constructor.call(this,c);this.publish("listChanged");this.selects=[]};b.extend(a.widget.ListCustom,a.widget.DDList,{addItem:function(l){if(this.disabled){return false}if(this.maxItems&&this.items.length>=this.maxItems){this.maxItemsAlert?this.maxItemsAlert.call():alert("You're limited to "+this.maxItems+" items");return}var d={};d.label=(typeof l=="object")?l.label:l;d.value=(typeof l=="object")?l.value:l;var k=a.cn("li",{className:"inputEx-DDList-item"});d.span=a.cn("span",null,null,d.label);if(this.listSelectOptions){var h=new a.SelectField(this.listSelectOptions);h.on("updated",function(){this.fire("listChanged")},this,true);this.selects.push(h);k.appendChild(h.el);d.getValue=function(){return{select:h.getValue(),label:this.label,value:this.value}};d.setValue=function(p,m){var i=(typeof p=="object")?p.label:p;var o=(typeof p=="object")?p.value:p;var n=(typeof p=="object")?p.selectValue:p;this.span.innerHTML=i;this.label=i;this.value=o;h.setValue(n,m)}}else{d.getValue=function(){result={};if(this.value){result.value=this.value}if(this.label){result.label=this.label}return result};d.setValue=function(m,i){this.label=(typeof m=="object")?m.label:m;this.value=(typeof m=="object")?m.value:m;this.span.innerHTML=this.label}}if(this.uniqueness){var c=d.getValue();var j=[];for(var f=0;f<this.items.length;f++){var e=this.items[f].getValue();if(c.label===e.label&&c.value===e.value){return}}}k.appendChild(d.span);if(this.animColors){this.buildAnim(k).run()}if(!!this.options.allowDelete){var g=a.cn("div",{id:d.value+"-Close",className:this.classRemoveButton||"removeButton"},null,"");k.appendChild(g);b.on("click",this.onRemove,g,this)}this.items.push(d);this.ul.appendChild(k)},disable:function(){var e=this.selects;for(var d=0;d<e.length;d++){e[d].disable()}var c=this.items;for(var d=0;d<c.length;d++){var f=b.one(c[d].value+"-Close");f.addClass("hidden");b.detach("click",this.onClose,f,this,true)}this.disabled=true},onRemove:function(f){var d=f.target._node;var c=d.parentNode;this.removeItem(a.indexOf(c,this.ul.childNodes))},enable:function(){var e=this.selects;for(var d=0;d<e.length;d++){e[d].enable()}var c=this.items;for(var d=0;d<c.length;d++){var f=b.one(c[d].value+"-Close");if(f){f.removeClass("hidden")}b.on("click",this.onClose,f,this,true)}this.disabled=false},getValue:function(){var d=[];for(var c=0;c<this.items.length;c++){d.push(this.items[c].getValue())}return d},setValue:function(f,d){if(this.disabled){return false}if(this.items.length>f.length){var c=this.items.length;for(var e=0;e<c-f.length;e++){this.removeItem(c-1-e,d)}}for(var e=0;e<f.length;e++){if(this.items[e]){this.items[e].setValue(f[e],d)}else{this.addItem(f[e],d)}}},removeItem:function(d,c){var e=this._removeItem(d);this.fire("itemRemoved",e,c)},buildAnim:function(c){var d=b.one(c);var e=new b.Anim(b.mix({node:d,duration:0.5},this.animColors));e.on("end",function(){d.setStyle("background","transparent")});return e}})},"3.0.0a",{requires:["sortable","anim"]});