YUI.add("inputex-menu",function(e){var b=e.inputEx,d=e.Lang;var c=e.YUI2,a=c.util.Event;b.MenuField=function(f){b.MenuField.superclass.constructor.call(this,f)};e.extend(b.MenuField,b.Field,{setOptions:function(f){b.MenuField.superclass.setOptions.call(this,f);this.options.className=f.className?f.className:"inputEx-Field inputEx-MenuField";this.options.typeInvite=f.typeInvite||b.messages.menuTypeInvite;this.options.menuTrigger=f.menuTrigger||"click";this.options.menuPosition=f.menuPosition||["tl","tr"];this.options.menuItems=f.menuItems;this.options.menuConfig=f.menuConfig||{}},renderComponent:function(){this.el=b.cn("div",{className:"inputEx-Result"},null,this.options.typeInvite);c.util.Dom.addClass(this.el,(this.options.menuPosition[1]=="tr")?"inputEx-RightArrow":"inputEx-DownArrow");this.fieldContainer.appendChild(this.el);this.hiddenEl=b.cn("input",{type:"hidden",name:this.options.name||"",value:this.options.value||""});this.fieldContainer.appendChild(this.hiddenEl);this.initMenu()},initMenuItems:function(){this._textFromValue={};var f=this;var g=function(h,m){if(m>4){throw new Error("MenuField : too much recursion, menuItems property should be 5 level deep at most.")}var l;for(var j=0,k=h.length;j<k;j++){l=h[j];if(d.isUndefined(l.text)&&!d.isUndefined(l.value)){l.text=l.value}if(d.isUndefined(l.value)&&!d.isUndefined(l.text)){l.value=l.text}if(!d.isUndefined(l.submenu)){if(d.isUndefined(l.submenu.id)){l.submenu.id=c.util.Dom.generateId()}g(l.submenu.itemdata,m+1)}else{f._textFromValue[l.value]=l.text;l.onclick={fn:function(){f.onItemClick.apply(f,arguments)},obj:l.value}}}};g(this.options.menuItems,0)},initMenu:function(){this.initMenuItems();this.menuContainer=b.cn("div");this.fieldContainer.appendChild(this.menuContainer);var f=[this.el].concat(this.options.menuPosition);this.options.menuConfig.context=f;this.menu=new c.widget.Menu(c.util.Dom.generateId(),this.options.menuConfig);this.menu.addItems(this.options.menuItems);this.menu.render(this.menuContainer)},initEvents:function(){this.menu.subscribe("show",this.menu.focus);c.util.Event.addListener(this.el,this.options.menuTrigger,function(){if(!this.menu.cfg.getProperty("visible")){this.menu.align();this.menu.show()}},null,this)},onItemClick:function(g,f,h){this.setValue(h,true)},getValue:function(){return this.hiddenEl.value},setValue:function(g,f){this.el.innerHTML=this._textFromValue[g]||this.options.typeInvite;this.hiddenEl.value=(!!this._textFromValue[g])?g:"";b.MenuField.superclass.setValue.call(this,g,f)}});b.registerType("menu",b.MenuField)},"3.0.0a",{requires:["inputex-field","yui2-menu"]});